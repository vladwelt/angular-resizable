angular.module("angularResizable",[]).directive("resizable",function(){function e(e){void 0===t?(t=e,setTimeout(function(){t(),t=void 0},100)):t=e}var t;return{restrict:"AE",scope:{rDirections:"=",rCenteredX:"=",rCenteredY:"=",rWidth:"=",rHeight:"=",rFlex:"=",rGrabber:"@",rDisabled:"@",rNoThrottle:"="},link:function(t,r,n){var i="flexBasis"in document.documentElement.style?"flexBasis":"webkitFlexBasis"in document.documentElement.style?"webkitFlexBasis":"msFlexPreferredSize"in document.documentElement.style?"msFlexPreferredSize":"flexBasis";t.$watch("rWidth",function(e){r[0].style[t.rFlex?i:"width"]=t.rWidth+"px"}),t.$watch("rHeight",function(e){r[0].style[t.rFlex?i:"height"]=t.rHeight+"px"}),t.$watch("rFlex",function(e){t.rFlex||(r[0].style.flexBasis="")}),r.addClass("resizable");var s,a,o,l,c,u=window.getComputedStyle(r[0],null),d=t.rDirections||["right"],h=t.rCenteredX?2:1,p=t.rCenteredY?2:1,m=t.rGrabber?t.rGrabber:'<div class=\'resize\'><button class="o1"><span></span></button><button class="o2"><span></span></button></div>',x={},g=function(e){x.width=!1,x.height=!1,"x"===c?x.width=parseInt(r[0].style[t.rFlex?i:"width"]):x.height=parseInt(r[0].style[t.rFlex?i:"height"]),x.id=r[0].id,x.evt=e},v=function(e){return e.touches?e.touches[0].clientX:e.clientX},b=function(e){return e.touches?e.touches[0].clientY:e.clientY},f=function(n){function u(){t.$emit("angular-resizable.resizing",x)}var d,m="x"===c?o-v(n):o-b(n);switch(l){case"top":d=t.rFlex?i:"height",r[0].style[d]=a+m*p+"px";break;case"bottom":d=t.rFlex?i:"height",r[0].style[d]=a-m*p+"px";break;case"right":d=t.rFlex?i:"width",r[0].style[d]=s-m*h+"px";break;case"left":d=t.rFlex?i:"width",r[0].style[d]=s+m*h+"px"}g(n),t.rNoThrottle?u():e(u)},y=function(e){g(),t.$emit("angular-resizable.resizeEnd",x),t.$apply(),document.removeEventListener("mouseup",y,!1),document.removeEventListener("mousemove",f,!1),document.removeEventListener("touchend",y,!1),document.removeEventListener("touchmove",f,!1),r.removeClass("no-transition")},w=function(e,n){l=n,c="left"===l||"right"===l?"x":"y",o="x"===c?v(e):b(e),s=parseInt(u.getPropertyValue("width")),a=parseInt(u.getPropertyValue("height")),r.addClass("no-transition"),document.addEventListener("mouseup",y,!1),document.addEventListener("mousemove",f,!1),document.addEventListener("touchend",y,!1),document.addEventListener("touchmove",f,!1),e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1,g(e),t.$emit("angular-resizable.resizeStart",x),t.$apply()};d.forEach(function(e){var n=document.createElement("div");n.setAttribute("class","rg-"+e),n.innerHTML=m,r[0].appendChild(n),n.ondragstart=function(){return!1};var o=function(r){var n="true"===t.rDisabled;n||1!==r.which&&!r.touches||w(r,e)};n.addEventListener("mousedown",o,!1),n.addEventListener("touchstart",o,!1),window.grabber=n,n.getElementsByClassName("o1")[0].addEventListener("click",function(){s=parseInt(u.getPropertyValue("width")),a=parseInt(u.getPropertyValue("height"));var n,o,l,c=5;switch("left"===e||"right"===e?(l="left",o="x"):(l="bottom",o="y"),l){case"top":n=t.rFlex?i:"height",r[0].style[n]=a+c*p+"px";break;case"bottom":n=t.rFlex?i:"height",r[0].style[n]=a-c*p+"px";break;case"right":n=t.rFlex?i:"width",r[0].style[n]=s-c*h+"px";break;case"left":n=t.rFlex?i:"width",r[0].style[n]=s+c*h+"px"}g(o)}),n.getElementsByClassName("o2")[0].addEventListener("click",function(){s=parseInt(u.getPropertyValue("width")),a=parseInt(u.getPropertyValue("height"));var n,o,l,c=5;switch("left"===e||"right"===e?(l="right",o="x"):(l="top",o="y"),l){case"top":n=t.rFlex?i:"height",r[0].style[n]=a+c*p+"px";break;case"bottom":n=t.rFlex?i:"height",r[0].style[n]=a-c*p+"px";break;case"right":n=t.rFlex?i:"width",r[0].style[n]=s-c*h+"px";break;case"left":n=t.rFlex?i:"width",r[0].style[n]=s+c*h+"px"}g(o)})})}}});